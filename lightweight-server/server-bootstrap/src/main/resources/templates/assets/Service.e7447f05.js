import{l as e}from"./service.29e8172a.js";import{p as a,a as t,r as l,z as s,o as i,c as r,f as o,A as n,w as c,i as d}from"./vendor.02d980ab.js";import"./request.83ecd05f.js";const h={name:"Service",data:()=>({serviceList:[],query:{},loading:!1}),created(){this.getData()},methods:{getData(){this.loading=!0,e().then((e=>{this.loading=!1,this.serviceList=e.data.data,this.countHealthyNum()}))},countHealthyNum(){for(let e=0;e<this.serviceList.length;e++){let a=0;for(let t=0;t<this.serviceList[e].hosts.length;t++)!0===this.serviceList[e].hosts[t].healthy&&a++;this.serviceList[e].healthyNum=a}},lookDetail(e){this.$router.push({name:"serviceDetail",params:{serviceName:e.serviceName}})},deleteService(e){this.$message.error("还没有这个功能")}}},u=c();a("data-v-3ffb34fa");const m={class:"container"},p={class:"handle-box"},v=d("查询"),f=d("查看 "),g=d("删除 ");t();const b=u(((e,a,t,c,d,h)=>{const b=l("el-input"),y=l("el-button"),k=l("el-table-column"),L=l("el-table"),N=s("loading");return i(),r("div",null,[o("div",m,[o("div",p,[o(b,{modelValue:d.query.name,"onUpdate:modelValue":a[1]||(a[1]=e=>d.query.name=e),placeholder:"",class:"handle-input mr10"},null,8,["modelValue"]),o(y,{type:"primary",icon:"el-icon-search",onClick:h.getData},{default:u((()=>[v])),_:1},8,["onClick"])]),n(o(L,{data:d.serviceList,border:"",class:"table",ref:"multipleTable","header-cell-class-name":"table-header"},{default:u((()=>[o(k,{prop:"serviceName",label:"服务名称",width:"300",align:"center"}),o(k,{prop:"hosts.length",label:"实例数",width:"200",align:"center"}),o(k,{prop:"healthyNum",label:"健康实例数",width:"200",align:"center"}),o(k,{label:"操作",align:"center"},{default:u((e=>[o(y,{type:"text",onClick:a=>h.lookDetail(e.row)},{default:u((()=>[f])),_:2},1032,["onClick"]),o(y,{type:"text",onClick:a=>h.deleteService(e.row)},{default:u((()=>[g])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"]),[[N,d.loading]])])])}));h.render=b,h.__scopeId="data-v-3ffb34fa";export default h;
